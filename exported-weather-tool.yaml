apiVersion: kagenti.operator.dev/v1alpha1
kind: Component
metadata:
  creationTimestamp: "2025-10-19T18:41:33Z"
  finalizers:
  - kagenti.operator.dev/finalizer
  generation: 1
  labels:
    app.kubernetes.io/created-by: streamlit-ui
    app.kubernetes.io/name: kagenti-operator
    kagenti.io/framework: Python
    kagenti.io/protocol: streamable_http
    kagenti.io/type: tool
  name: weather-tool
  namespace: team1
  resourceVersion: "8870"
  uid: c840c540-4dd4-4358-afa0-da84e92623fa
spec:
  deployer:
    deployAfterBuild: true
    env:
    - name: PORT
      value: "8000"
    - name: HOST
      value: 0.0.0.0
    - name: OTEL_EXPORTER_OTLP_ENDPOINT
      value: http://otel-collector.kagenti-system.svc.cluster.local:8335
    - name: KEYCLOAK_URL
      value: http://keycloak.keycloak.svc.cluster.local:8080
    - name: UV_CACHE_DIR
      value: /app/.cache/uv
    kubernetes:
      containerPorts:
      - containerPort: 8000
        name: http
        protocol: TCP
      imageSpec:
        image: weather-tool
        imagePullPolicy: Always
        imageRegistry: registry.cr-system.svc.cluster.local:5000
        imageTag: v0.0.1
      resources:
        limits:
          cpu: 500m
          memory: 1Gi
        requests:
          cpu: 100m
          memory: 256Mi
      servicePorts:
      - name: http
        port: 8000
        protocol: TCP
        targetPort: 8000
      volumeMounts:
      - mountPath: /app/.cache
        name: cache
      - mountPath: /.marvin
        name: marvin
      volumes:
      - emptyDir: {}
        name: cache
      - emptyDir: {}
        name: marvin
    name: weather-tool
    namespace: team1
  description: Tool 'weather-tool' built from UI.
  suspend: false
  tool:
    build:
      cleanupAfterBuild: true
      mode: custom
      pipeline:
        namespace: team1
        parameters:
        - name: SOURCE_REPO_SECRET
          value: github-token-secret
        - name: repo-url
          value: github.com/kagenti/agent-examples
        - name: revision
          value: main
        - name: subfolder-path
          value: mcp/weather_tool
        - name: image
          value: registry.cr-system.svc.cluster.local:5000/weather-tool:v0.0.1
        steps:
        - configMap: github-clone-step
          enabled: true
          name: github-clone
        - configMap: check-subfolder-step
          enabled: true
          name: folder-verification
        - configMap: kaniko-docker-build-step-local
          enabled: true
          name: kaniko-build
    toolType: MCP
status:
  buildStatus:
    lastBuildTime: "2025-10-19T18:43:23Z"
    message: Build completed successfully
    phase: Succeeded
    pipelineRunName: weather-tool-1919331019184133
  conditions:
  - lastTransitionTime: "2025-10-19T18:43:25Z"
    message: Component is ready
    reason: Ready
    status: "True"
    type: Ready
  deploymentStatus:
    deploymentMessage: Component Deployed
    phase: Ready
  lastTransitionTime: "2025-10-19T18:47:28Z"
